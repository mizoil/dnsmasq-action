#!/bin/bash

# –í—ã—Ö–æ–¥ –ø—Ä–∏ –æ—à–∏–±–∫–µ
set -e

echo "üîß –£–¥–∞–ª—è—é —Å—Ç–∞—Ä—ã–π —Ç–µ–≥ v0.1 (–µ—Å–ª–∏ –µ—Å—Ç—å)..."
git tag -d v0.1 || true
git push origin :refs/tags/v0.1 || true

echo "‚úÖ –°—Ç–∞—Ä—ã–π —Ç–µ–≥ —É–¥–∞–ª—ë–Ω"

echo "üìù –î–æ–±–∞–≤–ª—è—é –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∫–æ–º–º–∏—á—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)..."
git add action.yml README.md
git commit -m "Add GitHub Action for Dnsmasq config check" || echo "‚úÖ –£–∂–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω–æ"

echo "üè∑ –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π —Ç–µ–≥ v0.1 –Ω–∞ —Ç–µ–∫—É—â–µ–º –∫–æ–º–º–∏—Ç–µ..."
git tag v0.1

echo "üöÄ –ü—É–±–ª–∏–∫—É—é —Ç–µ–≥ v0.1 –Ω–∞ GitHub..."
git push origin v0.1

echo "‚úÖ –í—Å—ë –≥–æ—Ç–æ–≤–æ. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Action –∫–∞–∫: mizoil/dnsmasq-action@v0.1"
